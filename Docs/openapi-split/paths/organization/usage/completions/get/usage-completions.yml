paths:
  /organization/usage/completions:
    get:
      tags:
        - Usage
      summary: Get completions usage details for the organization.
      operationId: usage-completions
      parameters:
        - name: start_time
          in: query
          description: 'Start time (Unix seconds) of the query time range, inclusive.'
          required: true
          schema:
            type: integer
        - name: end_time
          in: query
          description: 'End time (Unix seconds) of the query time range, exclusive.'
          schema:
            type: integer
        - name: bucket_width
          in: query
          description: 'Width of each time bucket in response. Currently `1m`, `1h` and `1d` are supported, default to `1d`.'
          schema:
            enum:
              - 1m
              - 1h
              - 1d
            type: string
            default: 1d
        - name: project_ids
          in: query
          description: Return only usage for these projects.
          schema:
            type: array
            items:
              type: string
        - name: user_ids
          in: query
          description: Return only usage for these users.
          schema:
            type: array
            items:
              type: string
        - name: api_key_ids
          in: query
          description: Return only usage for these API keys.
          schema:
            type: array
            items:
              type: string
        - name: models
          in: query
          description: Return only usage for these models.
          schema:
            type: array
            items:
              type: string
        - name: batch
          in: query
          description: "If `true`, return batch jobs only. If `false`, return non-batch jobs only. By default, return both.\n"
          schema:
            type: boolean
        - name: group_by
          in: query
          description: 'Group the usage data by the specified fields. Support fields include `project_id`, `user_id`, `api_key_id`, `model`, `batch` or any combination of them.'
          schema:
            type: array
            items:
              enum:
                - project_id
                - user_id
                - api_key_id
                - model
                - batch
              type: string
        - name: limit
          in: query
          description: "Specifies the number of buckets to return.\n- `bucket_width=1d`: default: 7, max: 31\n- `bucket_width=1h`: default: 24, max: 168\n- `bucket_width=1m`: default: 60, max: 1440\n"
          schema:
            type: integer
        - name: page
          in: query
          description: A cursor for use in pagination. Corresponding to the `next_page` field from the previous response.
          schema:
            type: string
      responses:
        '200':
          description: Usage data retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsageResponse'
      x-oaiMeta:
        name: Completions
        group: usage-completions
        returns: 'A list of paginated, time bucketed [Completions usage](/docs/api-reference/usage/completions_object) objects.'
        examples:
          response: "{\n    \"object\": \"page\",\n    \"data\": [\n        {\n            \"object\": \"bucket\",\n            \"start_time\": 1730419200,\n            \"end_time\": 1730505600,\n            \"results\": [\n                {\n                    \"object\": \"organization.usage.completions.result\",\n                    \"input_tokens\": 1000,\n                    \"output_tokens\": 500,\n                    \"input_cached_tokens\": 800,\n                    \"input_audio_tokens\": 0,\n                    \"output_audio_tokens\": 0,\n                    \"num_model_requests\": 5,\n                    \"project_id\": null,\n                    \"user_id\": null,\n                    \"api_key_id\": null,\n                    \"model\": null,\n                    \"batch\": null\n                }\n            ]\n        }\n    ],\n    \"has_more\": true,\n    \"next_page\": \"page_AAAAAGdGxdEiJdKOAAAAAGcqsYA=\"\n}\n"
          request:
            curl: "curl \"https://api.openai.com/v1/organization/usage/completions?start_time=1730419200&limit=1\" \\\n-H \"Authorization: Bearer $OPENAI_ADMIN_KEY\" \\\n-H \"Content-Type: application/json\"\n"