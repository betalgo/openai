components:
  schemas:
    GraderMulti:
      title: MultiGrader
      required:
        - name
        - type
        - graders
        - calculate_output
      type: object
      properties:
        type:
          enum:
            - multi
          type: string
          description: 'The object type, which is always `multi`.'
          default: multi
          x-stainless-const: true
        name:
          type: string
          description: The name of the grader.
        graders:
          anyOf:
            - $ref: '#/components/schemas/GraderStringCheck'
            - $ref: '#/components/schemas/GraderTextSimilarity'
            - $ref: '#/components/schemas/GraderPython'
            - $ref: '#/components/schemas/GraderScoreModel'
            - $ref: '#/components/schemas/GraderLabelModel'
        calculate_output:
          type: string
          description: A formula to calculate the output based on grader results.
      description: A MultiGrader object combines the output of multiple graders to produce a single score.
      x-oaiMeta:
        name: Multi Grader
        group: graders
        example: "{\n  \"type\": \"multi\",\n  \"name\": \"example multi grader\",\n  \"graders\": [\n    {\n      \"type\": \"text_similarity\",\n      \"name\": \"example text similarity grader\",\n      \"input\": \"The graded text\",\n      \"reference\": \"The reference text\",\n      \"evaluation_metric\": \"fuzzy_match\"\n    },\n    {\n      \"type\": \"string_check\",\n      \"name\": \"Example string check grader\",\n      \"input\": \"{{sample.output_text}}\",\n      \"reference\": \"{{item.label}}\",\n      \"operation\": \"eq\"\n    }\n  ],\n  \"calculate_output\": \"0.5 * text_similarity_score +  0.5 * string_check_score)\"\n}\n"